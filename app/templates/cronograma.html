
{% extends 'base.html' %}
{% block content %}

<h2 class="text-3xl font-bold mb-6 text-corporativo-morado text-center">ðŸ“Š Cronograma de Proyectos</h2>

{% set min_date = projects|map(attribute='start_date')|min %}
{% set max_date = projects|map(attribute='end_date')|max %}

<div class="text-sm text-center text-gray-500 mb-6">
    Rango del cronograma: <strong>{{ min_date }} â†’ {{ max_date }}</strong>
</div>

<div class="space-y-6">
    {% for project in projects %}
    <div class="bg-white p-4 shadow-sm rounded border border-gray-200">

        <!-- Cabecera -->
        <div class="flex justify-between items-center text-sm mb-1">
            <div class="flex items-center gap-2 font-semibold text-corporativo-azul">
                <svg class="w-4 h-4 text-corporativo-naranjo" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-3-3v6" />
                </svg>
                {{ project.name }}
            </div>
            <span class="text-xs font-medium px-2 py-1 rounded-full capitalize
                {% if project.status == 'activo' %} bg-green-100 text-green-800
                {% elif project.status == 'suspendido' %} bg-red-100 text-red-800
                {% elif project.status == 'finalizado' %} bg-blue-100 text-blue-800
                {% else %} bg-yellow-100 text-yellow-800 {% endif %}">
                {{ project.status }}
            </span>
        </div>

        <!-- Fechas -->
        <div class="text-xs text-gray-500 mb-2">
            ðŸ“… {{ project.start_date }} â†’ {{ project.end_date }}
        </div>

        <!-- Barra Gantt con lÃ­nea base -->
        <div class="relative w-full h-6 bg-gradient-to-r from-gray-100 via-gray-200 to-gray-100 rounded-full overflow-hidden">
            <div class="absolute top-0 h-6 rounded-full text-white text-xs font-bold flex items-center justify-center shadow"
                style="left: {{ project.days_offset }}%; width: {{ project.duration_percent }}%; background-color: #5c02a2;"
                title="DuraciÃ³n: {{ project.duration_percent|round(1) }}%">
                {{ project.progress }}%
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock %}
