<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Project Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        corporativo: {
                            fondo: '#f2f2f2',
                            morado: '#5c02a2',
                            azul: '#0b1738',
                            naranjo: '#f1680d',
                        }
                    }
                }
            }
        }
    </script>
    <script>
        // Al cargar la p√°gina, aplicar tema guardado
        if (localStorage.getItem('dark-mode') === 'true') {
          document.documentElement.classList.add('dark');
        }
      </script>
      
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/theme.css') }}">

</head>
<body class="bg-gray-100 text-gray-800 min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-corporativo-azul text-white px-6 py-4 flex flex-col md:flex-row justify-between items-center">

        <h1 class="text-2xl font-bold mb-2 md:mb-0">Project Tracker</h1>
        
        {% if current_user.is_authenticated %}
        <div class="flex items-center gap-4 text-sm">
            <span>Hola, {{ current_user.name }}</span>

            <!-- Notificaciones -->
            <a href="{{ url_for('notificaciones') }}" class="relative hover:underline">
                üîî Notificaciones
                {% set unread = current_user.notifications|selectattr("is_read", "equalto", False)|list|length %}
                {% if unread > 0 %}
                <span class="absolute -top-2 -right-4 bg-red-600 text-white text-xs font-bold rounded-full px-2 py-0.5 shadow">
                    {{ unread }}
                </span>
                {% endif %}
            </a>

            <!-- Logout -->
            <a href="{{ url_for('logout') }}" class="hover:underline">Cerrar sesi√≥n</a>
        </div>
        {% endif %}
    </header>

    <!-- Navegaci√≥n -->
    

    <!-- Contenido principal -->
    <main class="flex-1 p-6">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 px-4 py-3 rounded mb-4">
                    {% for message in messages %}
                        <p>{{ message }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

</body>
</html>
