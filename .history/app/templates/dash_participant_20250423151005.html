{% extends 'base.html' %}
{% block content %}
<h2 class="text-2xl font-bold mb-4">Dashboard Colaborador de Proyectos</h2>
<p  class="text-2xl font-bold mb-6 text-corporativo-morado">üìãProyectos donde participas<p>
{% set color_map = {
    'activo': 'bg-green-100 text-green-800 border-green-300',
    'suspendido': 'bg-red-100 text-red-800 border-red-300',
    'finalizado': 'bg-blue-100 text-blue-800 border-blue-300',
    'en espera': 'bg-yellow-100 text-yellow-800 border-yellow-300'
} %}


<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for project in projects %}
    <div class="bg-white border border-gray-200 shadow-sm rounded-lg p-4">
        <h4 class="text-base font-semibold text-corporativo-azul mb-1">{{ project.name }}</h4>
        <p class="text-sm text-gray-600">Progreso: {{ project.progress }}%</p>
        <div class="w-full bg-gray-200 rounded-full h-2 mt-1 mb-2">
            <div class="bg-corporativo-naranjo h-2 rounded-full" style="width: {{ project.progress }}%;"></div>
        </div>
        <p class="text-xs text-gray-500 mb-2">
            Inicio: {{ project.start_date }}<br>
            Fin: {{ project.end_date }}
        </p>

        <a href="{{ url_for('ver_bitacora', project_id=project.id) }}"
        class="inline-flex items-center gap-2 text-xs font-medium text-white bg-corporativo-morado hover:bg-corporativo-naranjo px-3 py-1.5 rounded mt-2 transition">
            üìö Ver Bit√°cora
        </a>

        <span class="inline-block px-3 py-1 rounded-full text-xs font-semibold border capitalize {{ color_map[project.status] }}">
            {{ project.status }}
        </span>

        <a href="{{ url_for('project_tasks', project_id=project.id) }}"
                   class="inline-flex items-center gap-1 text-xs font-medium text-white bg-green-600 hover:bg-green-700 px-3 py-1.5 rounded transition">
                    ‚úÖ Ver Tareas
                </a>
            </a>
            <a href="{{ url_for('create_task', project_id=project.id) }}"
            class="bg-corporativo-morado text-white text-xs px-3 py-1 rounded hover:bg-corporativo-naranjo transition">‚ûï Nueva Tarea</a>
        {% if project.admin_comment %}
        <div class="mt-2 text-sm text-yellow-800 bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded">
            <strong>Comentario del Administrador:</strong><br>
            {{ project.admin_comment }}
        </div>
        {% endif %}
    </div>
    {% endfor %}
</div>



{% for project in projects %}
  <div class="bg-white p-4 rounded shadow mb-4">
    <h3 class="text-lg font-bold">{{ project.name }}</h3>
    <a href="{{ url_for('project_tasks', project_id=project.id) }}" class="text-purple-700 hover:underline text-sm">
      ‚û°Ô∏è Ver Tareas
    </a>
  </div>
{% endfor %}




<a href="{{ url_for('log_hours') }}" class="inline-block bg-indigo-600 text-white px-4 py-2 rounded mt-4">Registrar horas</a>

{% endblock %}
