{% extends 'base.html' %}
{% block content %}
<div class="max-w-3xl mx-auto bg-white shadow rounded p-6">
    <h2 class="text-2xl font-bold mb-4">Perfil de Usuario</h2>

    <div class="mb-4">
        <p><strong>Nombre:</strong> {{ user.name }}</p>
        <p><strong>Correo:</strong> {{ user.email }}</p>
        <p><strong>Rol:</strong> {{ user.role.capitalize() }}</p>
    </div>

    <div class="mb-6">
        <p><strong>Proyectos asignados:</strong> {{ num_projects }}</p>
        {% if user.role == 'participant' %}
            <p><strong>Horas trabajadas:</strong> {{ total_hours }}</p>
        {% endif %}
    </div>

    {% if projects %}
        <h3 class="text-lg font-semibold mb-2">Proyectos:</h3>
        <ul class="list-disc list-inside">
            {% for project in projects %}
                <li>{{ project.name }} (Progreso: {{ project.progress }}%)</li>
            {% endfor %}
        </ul>
    {% endif %}



    {% if current_user.role == 'admin' %}
<div class="mt-10 bg-white shadow rounded p-6">
  <h3 class="text-lg font-bold mb-4 text-corporativo-morado">ðŸ‘¥ Todos los Usuarios Registrados</h3>
  <div class="overflow-x-auto">
    <table class="min-w-full text-sm divide-y divide-gray-200">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-4 py-2 text-left font-semibold text-gray-700">Nombre</th>
          <th class="px-4 py-2 text-left font-semibold text-gray-700">Rol</th>
          <th class="px-4 py-2 text-left font-semibold text-gray-700">Correo</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-100">
        {% for u in all_users %}
        <tr class="hover:bg-gray-50">
          <td class="px-4 py-2">{{ u.name }}</td>
          <td class="px-4 py-2 capitalize">{{ u.role }}</td>
          <td class="px-4 py-2">{{ u.email }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <a href="{{ url_for('register') }}" class="flex items-center gap-1 text-blue-700 hover:underline">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9a6 6 0 10-12 0 6 6 0 0012 0zm0 0v3a3 3 0 01-3 3H9a3 3 0 01-3-3V9" />
        </svg> Crear Usuario
    </a>
  </div>
</div>
{% endif %}

</div>
{% endblock %}
